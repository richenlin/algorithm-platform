# Algorithm Platform Configuration Example
# Copy this file to config.yaml and modify according to your environment

server:
  # gRPC server port
  grpc_port: 9090
  # HTTP/REST API server port
  http_port: 8080

docker:
  # Docker daemon host (unix socket or tcp)
  host: "unix:///var/run/docker.sock"
  # Docker API version
  api_version: "1.45"
  # Optional TLS certificates for remote Docker daemon
  tls_cert: ""
  tls_key: ""

redis:
  # Redis server address
  addr: "localhost:6379"
  # Redis password (leave empty if no auth)
  password: ""
  # Redis database number
  db: 0

minio:
  # MinIO server endpoint (internal address)
  # Use "minio:9000" for Docker Compose
  # Use "localhost:9000" for local development
  endpoint: "minio:9000"
  
  # MinIO external endpoint (for client access)
  # This is the URL returned to clients for downloading files
  external_endpoint: "localhost:9000"
  
  # MinIO access credentials
  access_key_id: "minioadmin"
  secret_access_key: "minioadmin"
  
  # MinIO bucket name for storing algorithm data
  bucket: "algorithm-platform"
  
  # Use SSL/TLS for MinIO connection
  use_ssl: false

database:
  # Database type: sqlite or postgres
  type: "sqlite"
  
  # SQLite configuration (used when type is "sqlite")
  sqlite:
    path: "./data/algorithm-platform.db"
    wal_checkpoint_interval: 30s
  
  # PostgreSQL configuration (used when type is "postgres")
  postgresql:
    host: "localhost"
    port: 5432
    user: "postgres"
    password: "postgres"
    dbname: "algorithm_platform"
    sslmode: "disable"  # disable, require, verify-ca, verify-full
    timezone: "Asia/Shanghai"

# Development Notes:
# - Set environment variable LOCAL_MODE=true to override minio endpoint to localhost:9000
# - For production deployment, update minio endpoints and credentials
# - Make sure Redis and MinIO services are running before starting the server
# - Database defaults to SQLite, switch to PostgreSQL for production use
